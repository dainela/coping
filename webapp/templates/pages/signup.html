{% extends 'pages/index.html' %}
{% load static %}
{% block content %}

<form class="availabilityprof2" method="post" enctype="multipart/form-data">
    <!-- Add enctype for file upload -->
    {% csrf_token %}
    <div class="form-group">
        <label for="username">Username:</label>
        {{ form.username }}
    </div>
    <div class="firstname">
        <label for="first_name">First Name:</label>
        {{ form.first_name }}
    </div>
    <div class="lastname">
        <label for="last_name">Last Name:</label>
        {{ form.last_name }}
    </div>
    <div class="form-group">
        <label for="email">Email:</label>
        {{ form.email }}
    </div>
    <div class="password1">
        <label for="password1">Password:</label>
        {{ form.password1 }}
    </div>
    <div class="password2">
        <label for="password2">Confirm Password:</label>
        {{ form.password2 }}
    </div>
    <div class="form-group">
        <label for="image">Profile Image:</label>
        {{ form.image }}
        <img id="imagePreview" src="#" alt="Image Preview" style="display: none; margin-top: 10px; max-width: 100%; border: 2px solid #38b993;" />
    </div>
    <button class="signupbtn" type="submit">Sign Up</button>
    <p>Already have an account? <a href="{% url 'signin' %}">Sign in here</a>.</p>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const fileInput = document.querySelector('input[type="file"]');
        const preview = document.getElementById('imagePreview');

        fileInput.addEventListener('change', function () {
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else {
                preview.src = '#';
                preview.style.display = 'none';
            }
        });
    });
</script>

<style>

    p{
       color: black;
    }
    .availabilityprof2 {
        margin: 200px 500px;
        text-align: left;
        width: 50%;
        font-size: 20px;
        box-shadow: 0px 5px 15px 0px rgb(37, 98, 79);
        margin-top: 50px;
        margin-left: 400px;
        border: 3px solid #38b993;
        background-color: #fff;
    }

    .availabilityprof2 h2 {
        color: #38b993;
    }

    .availabilityprof2 label {
        color: #38b993;
    }

    .availabilityprof2 input[type="text"], 
    .availabilityprof2 input[type="password"], 
    .availabilityprof2 input[type="email"], 
    .availabilityprof2 input[type="number"], 
    .availabilityprof2 input[type="file"],
    .availabilityprof2 textarea {
        border: 3px solid #38b993; 
        padding: 8px; 
        width: 100%; 
    }
    
    .form-group img {
        max-height: 200px;
        object-fit: contain;
        text-align: center;
    }

    .firstname {
        position: relative;
        margin-right: 380px;
    }

    .lastname {
        position: relative;
        margin-left: 380px;
        margin-top: -97px;
    }

    .password1 {
        position: relative;
        margin-right: 380px;
        margin-top: 10px;
    }

    .password2 {
        position: relative;
        margin-left: 380px;
        margin-top: -85px;
    }

    .years {
        position: relative;
        margin-right: 380px;
        margin-top: -10px;
    }

    .area {
        position: relative;
        margin-left: 380px;
        margin-top: -85px;
    }

    .email {
        position: relative;
    }
</style>

{% endblock %}
